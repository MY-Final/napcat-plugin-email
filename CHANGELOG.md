# 更新日志

所有项目的显著变更都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且该项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [1.1.5] - 2026-02-11

### 新增
- ✨ **邮件详情查看功能**
  - 点击历史记录可查看完整邮件详情
  - 显示收件人、发送时间、主题、发送状态
  - 展示附件列表（文件名和类型）
  - 支持纯文本/HTML 双模式切换查看邮件内容
  - 失败邮件显示错误信息
- ✨ 新增眼睛/查看图标组件

### 优化
- 🎨 **弹窗显示优化**
  - 使用 React Portal 渲染到 body，避免被父容器裁剪
  - 添加 z-[9999] 确保在最上层显示
  - 响应式设计，适配移动端和桌面端
  - 打开弹窗时锁定 body 滚动
  - 添加进入动画效果

---

## [1.1.4] - 2026-02-11

### 新增
- ✨ **邮件发送历史记录功能**
  - 自动记录所有邮件发送（定时任务、手动发送、测试邮件）
  - 显示发送时间、收件人、主题、状态、附件数量
  - 支持按类型和状态筛选
  - 提供分页浏览功能
  - 支持单条删除和一键清空
- ✨ **仪表盘统计增强**
  - 新增「今日邮件」和「累计邮件」统计卡片
  - 发送类型分布可视化（进度条展示）
  - 发送状态统计（成功率显示）
  - 今日发送概览（定时/手动/测试数量）
- ✨ 新增日历图标组件

### 计划功能
- [ ] 支持邮件模板功能
- [ ] 多邮箱账号支持

---

## [1.1.3] - 2026-02-11

### 新增
- ✨ **定时邮件发送功能**
  - 支持一次性、每天、每周、每月、间隔等多种定时类型
  - 可设置最大发送次数限制
  - 每分钟自动检查并执行到期的定时任务
  - 完整的 RESTful API 支持（CRUD 操作）
  - 支持手动立即执行任务
  - 任务状态跟踪（pending/sent/failed/cancelled）
- ✨ WebUI 新增定时邮件管理页面

### 优化
- 🎨 **简化插件配置**
  - 移除冗余配置项（启用插件、调试模式、命令前缀、冷却时间）
  - SMTP 配置移至「插件配置」页面
  - 「邮箱服务」页面仅保留测试邮件和发送邮件功能
  - 简化仪表盘，移除基础信息展示

---

## [1.1.0] - 2026-02-10

### 新增
- ✨ **支持 HTML 邮件内容**
  - WebUI 中可切换纯文本/HTML 模式
  - 支持完整的 HTML 标签（粗体、斜体、链接、图片等）
  - 自动从 HTML 提取纯文本作为备选内容
- ✨ **支持附件发送**
  - WebUI 中可直接上传多个文件（最大 10MB/个）
  - 自动识别常见文件类型（MIME）
  - 支持 PDF、Office 文档、图片、压缩包等
  - API 接口支持附件参数
- 🔧 **附件上传 API**
  - `POST /email/upload` - 上传临时附件
  - 自动保存到临时目录
  - 支持 Base64 编码传输

### 优化
- 📦 提升插件稳定性
- 🎨 改进 WebUI 用户体验

---

## [1.0.0] - 2026-02-10

### 新增
- ✨ 初始版本发布
- 📧 支持通过 QQ 命令发送邮件
  - `#email send <收件人> <主题> <内容>` - 发送邮件
  - `#email test` - 发送测试邮件
  - `#email help` - 显示帮助信息
- 🔧 支持 SMTP 服务器配置
  - 支持 QQ 邮箱、163 邮箱、Gmail 等主流邮箱
  - 支持 SSL/TLS 加密连接
  - 支持自定义发件人名称和邮件标题前缀
- 🌐 提供 WebUI 配置面板
  - 可视化 SMTP 配置界面
  - 测试邮件发送功能
  - 实时配置保存
- 📤 支持群发邮件
  - 可同时发送给多个收件人（逗号分隔）
- 🔌 提供完整的 RESTful API 接口
  - `GET /config` - 获取配置
  - `POST /config` - 保存配置
  - `POST /send` - 发送邮件
  - `POST /test` - 发送测试邮件
  - `GET /status` - 获取插件状态

### 技术特性
- 🔥 基于 NapCat 插件框架开发
- 📦 使用 TypeScript + Vite 构建
- ⚡ 支持热重载开发模式
- 🎨 使用 React + Tailwind CSS 开发 WebUI
- 📨 使用 Nodemailer 实现邮件发送

---

## 版本说明

- **主版本号**：当进行不兼容的 API 修改时
- **次版本号**：当以向后兼容的方式添加功能时
- **修订号**：当进行向后兼容的问题修复时

---

**维护者**: [MY-Final](https://github.com/MY-Final)  
**项目主页**: https://github.com/MY-Final/napcat-plugin-email
